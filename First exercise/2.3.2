
# THE MODEL
exammodel3.string = "
  model {
a <- 0
b <- 1
y <- 0
z <- 0.6

#prior
for (i in 1:n){
  p[i] ~ dunif(a,b) }

for (j in 1:m){
  q[j] ~ dunif(y,z)}



## Likelihood
for (j in 1:m){
  for (i in 1:n){
theta[i,j] <- p[i] * q[j]
k[i,j] ~ dbinom(theta[i,j],n)
}
}
}
"


# JAGS usually reads models from a text file; here we use a string as a fake file.   
exammodel3.spec = textConnection(exammodel3.string)

# SAMPLING PARAMETERS
mcmciterations = 10000

# Construct the object containing both the model specification as well as the data and some sampling parameters.
jagsmodel3 <- jags.model(exammodel3.spec,
                         data = list('k' = k1, 
                                     'n' = n,
                                     'm' = m),
                         n.chains = 4)

# Collect samples to approximate the posterior distribution.
model3samples = coda.samples(jagsmodel3,
                             c('theta'), # which variables do you want to monitor
                             n.iter = mcmciterations)
# Add your analyses on the collected samples here:
mcmcsummary = summary (model3samples)
mcmcsummary$statistics

